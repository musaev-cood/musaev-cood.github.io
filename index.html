<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=no">
    <title>GoyMarket - Ваш магазин продуктов</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <header>
        <h1>GoyMarket - Ваш магазин продуктов</h1>
    </header>

    <section>
        <div class="product" onclick="rotateAnimation(this)">
            <img src="https://www.otlichnye-tseny.ru/upload/iblock/f62/iqdhjkrb30c15qpwlrply3gh6jv6f0ey.jpg" alt="Product 3">
            <h3 class="product-title">Спрайт</h3>
            <p class="product-price">32 ₽</p>
            <button class="add-to-cart-button" onclick=AddToCartButton(this)>+</button>
            <button class="delete-to-cart-button" style="display:none;" onclick=deleteFromCartButton(this)>-</button>
            <div class="quantity" style="display:none;">0</div>
        </div>

        <div class="product" onclick="rotateAnimation(this)">
            <img src="https://www.otlichnye-tseny.ru/upload/iblock/f62/iqdhjkrb30c15qpwlrply3gh6jv6f0ey.jpg" alt="Product 3">
            <h3 class="product-title">Спрайт</h3>
            <p class="product-price">32 ₽</p>
            <button class="add-to-cart-button" onclick=AddToCartButton(this)>+</button>
            <button class="delete-to-cart-button" style="display:none;" onclick=deleteFromCartButton(this)>-</button>
            <div class="quantity" style="display:none;">0</div>
        </div>

        <div class="product" onclick="rotateAnimation(this)">
            <img src="https://www.otlichnye-tseny.ru/upload/iblock/f62/iqdhjkrb30c15qpwlrply3gh6jv6f0ey.jpg" alt="Product 3">
            <h3 class="product-title">Спрайт</h3>
            <p class="product-price">32 ₽</p>
            <button class="add-to-cart-button" onclick=AddToCartButton(this)>+</button>
            <button class="delete-to-cart-button" style="display:none;" onclick=deleteFromCartButton(this)>-</button>
            <div class="quantity" style="display:none;">0</div>
        </div>
    </section>

    <footer>
        <button id="cart-button" onclick="showCart()"> <img src="https://cdn-icons-png.flaticon.com/512/15/15278.png" alt="Shopping Cart"></button>
        <p>&copy; 2024 GoyMarket. Все права защищены.</p>
    </footer>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    function AddToCartButton(element) {
        const deleteButton = element.nextElementSibling;
        const quantityElement = element.nextElementSibling.nextElementSibling;

        deleteButton.style.display = 'inline-block';
        quantityElement.style.display = 'inline-block';

        let currentQuantity = parseInt(quantityElement.textContent, 10) || 0;

        if (currentQuantity === 0){
            quantityElement.classList.add('fade-in');
            setTimeout(() => {
                quantityElement.classList.remove('fade-in');
            }, 200);
        }else{
            quantityElement.classList.add('bounce');
            setTimeout(() => {
                quantityElement.classList.remove('bounce');
            }, 100);
        }

        if (currentQuantity<9){
            quantityElement.textContent = currentQuantity + 1;
        }
    }
    function deleteFromCartButton(element) {
        const quantityElement = element.nextElementSibling;

        let currentQuantity = parseInt(quantityElement.textContent, 10) || 0;
        quantityElement.textContent = Math.max(0, currentQuantity - 1).toString();
        if (currentQuantity <= 1) {
            element.style.display = 'none';
            quantityElement.classList.add('fade-out');
            setTimeout(() => {
                quantityElement.style.display = 'none';
                quantityElement.classList.remove('fade-out');
            }, 150); // Duration of the fade-out animation
        }
    }
    function rotateAnimation(element) {
        let clickedElement = event.target;

        // Check if the click event originated from the image
        if (clickedElement.tagName.toLowerCase() === 'img') {
            let img = element.querySelector('img');

            if (!img.classList.contains('rotate')) {
                img.classList.add('rotate');

                setTimeout(function () {
                    img.classList.remove('rotate');
                }, 500);
            }
        }
    }
</script>
</body>
</html>
